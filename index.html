<!DOCTYPE html>
<html>
<head>
    <title>HTML5 Platformer</title>
    <style>
        body { margin: 0; background: #5c94fc; overflow: hidden; font-family: 'Arial', sans-serif; }
        #gameCanvas { display: block; margin: 0 auto; background: #5c94fc; }
        .ui { position: absolute; top: 10px; left: 20px; color: white; font-size: 24px; text-shadow: 2px 2px #000; }
    </style>
</head>
<body>
    <div class="ui">Coins: <span id="score">0</span></div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');

        canvas.width = window.innerWidth;
        canvas.height = 400;

        // Game Constants
        const gravity = 0.8;
        const friction = 0.8;
        let score = 0;

        // Level Map (0 = Empty, 1 = Brick, 2 = Coin, 3 = Goal)
        const level = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],
            [0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0,0,3],
            [0,0,0,0,0,2,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,3],
            [1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];

        const tileSize = 60;
        let cameraX = 0;

        const player = {
            x: 100, y: 200,
            width: 40, height: 50,
            velX: 0, velY: 0,
            speed: 5, jumpStrength: -15,
            grounded: false,
            color: '#e74c3c'
        };

        const keys = {};

        // Controls
        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);

        function drawPlayer() {
            // Body
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x - cameraX, player.y, player.width, player.height);
            // Hat
            ctx.fillStyle = '#c0392b';
            ctx.fillRect(player.x - cameraX, player.y, player.width, 10);
            // Eyes
            ctx.fillStyle = 'black';
            ctx.fillRect(player.x - cameraX + 25, player.y + 15, 5, 5);
        }

        function update() {
            // Horizontal Movement
            if (keys['ArrowRight'] || keys['KeyD']) {
                if (player.velX < player.speed) player.velX++;
            }
            if (keys['ArrowLeft'] || keys['KeyA']) {
                if (player.velX > -player.speed) player.velX--;
            }
            player.velX *= friction;

            // Vertical Movement (Jump)
            if ((keys['Space'] || keys['ArrowUp'] || keys['KeyW']) && player.grounded) {
                player.velY = player.jumpStrength;
                player.grounded = false;
            }

            player.velY += gravity;
            player.x += player.velX;
            player.y += player.velY;
            player.grounded = false;

            // Camera Follow
            if (player.x > canvas.width / 2) {
                cameraX = player.x - canvas.width / 2;
            }

            // Collision Detection
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for (let r = 0; r < level.length; r++) {
                for (let c = 0; c < level[r].length; c++) {
                    let tile = level[r][c];
                    let tx = c * tileSize;
                    let ty = r * tileSize + 50;

                    if (tile === 1) { // Brick
                        ctx.fillStyle = '#9b59b6';
                        ctx.fillRect(tx - cameraX, ty, tileSize, tileSize);
                        ctx.strokeStyle = '#8e44ad';
                        ctx.
